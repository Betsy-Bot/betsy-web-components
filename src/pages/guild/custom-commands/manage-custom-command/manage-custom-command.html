<div class="row">
    <div class="col-12 col-xl-8">
        <feature-header
            doc-url="https://docs.betsybot.xyz/features/custom-commands"
            title="Manage Custom Command"
            subtitle="Manage your custom command"
            class="mb-3"
        ></feature-header>

        <moo-tab-bar class="mb-3">
            <moo-tab
                label="Settings"
                tab.bind="tab"
                value="settings"
                active.bind="tab === 'settings'"
            ></moo-tab>
            <moo-tab
                label="Actions"
                active.bind="tab === 'actions'"
                value="actions"
                tab.bind="tab"
            ></moo-tab>
            <moo-tab
                label="Response Message"
                active.bind="tab === 'response'"
                value="response"
                tab.bind="tab"
            ></moo-tab>
        </moo-tab-bar>
        <form submit.trigger="save()">
            <template if.bind="command" switch.bind="tab">
                <discord-command-creator command.two-way="command" case="settings"></discord-command-creator>
                <template case="actions">
                    <moo-button
                        variant="primary"
                        if.bind="command.discordCommandActions.length < 10"
                        click.bind="() => createNewCommandAction()">
                        Add Action
                    </moo-button>
                    <moo-tab-bar>
                        <moo-tab
                            repeat.for="action of command.discordCommandActions"
                            label="Action ${$index + 1}"
                            tab.bind="selectedAction"
                            value.bind="$index"
                            active.bind="selectedAction === $index"
                        ></moo-tab>
                    </moo-tab-bar>
                    <discord-action-creator
                        repeat.for="action of command.discordCommandActions"
                        if.bind="selectedAction === $index"
                        delete-function.bind="() => deleteAction($index)"
                        action.bind="action"
                        command.bind="command"
                    ></discord-action-creator>
                </template>
                <template case="response">
                    <moo-switch value.bind="command.private"></moo-switch>
                    <label class="mb-3">
                        Private?
                    </label>
                    <discord-message-creator
                        allow-components.bind="true"
                        message.bind="command.responseMessage"
                    ></discord-message-creator>
                </template>
            </template>
            <div class="text-end mt-3">
                <moo-button variant="primary" type="submit">
                    Save
                </moo-button>
            </div>
        </form>
    </div>
    <div class="col-12 col-xl-4">
        <discord-message-preview
            message.two-way="command.discordCommandActions[0].discordMessage.message"
        ></discord-message-preview>
    </div>
</div>
