<template>
  <div class="row">
    <div class="col-8">
      <h3 class="mb-3">
        Editing /${command.name}
      </h3>

      <discord-command-creator command.two-way="command"></discord-command-creator>

      <div class="my-3" repeat.for="action of command.discordCommandActions">
        <discord-action-creator
          delete-function.call="deleteAction(action)"
          action.two-way="action"
        ></discord-action-creator>
      </div>

      <div class="text-end">
        <button mdc-button
                class="button-secondary"
                if.bind="command.discordCommandActions.length < 10"
                click.delegate="createNewCommandAction()">
          Add Action
        </button>
      </div>

      <div class="mt-4">
        <a href="/guild/${guildId}/response-message">
          <button mdc-button class="button-secondary">
            Cancel
          </button>
        </a>
        <button mdc-button
                class="button-primary ms-4"
                click.delegate="updateCommand()">
          Save
        </button>
      </div>
    </div>
    <div class="col-4">
      <h4 class="text-center">Message Preview</h4>
      <div class="my-2" repeat.for="action of command.discordCommandActions">
        <discord-message-preview message.bind="action.discordMessage.message" first.bind="$index === 0"></discord-message-preview>
      </div>
    </div>
  </div>
</template>
