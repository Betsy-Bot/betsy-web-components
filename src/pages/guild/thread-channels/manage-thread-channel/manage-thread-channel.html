<confirmation-dialog
    cancel-text="Cancel"
    confirm-text="Delete"
    dialog.two-way="confirmDeleteDialog"
    handler.bind="(event) => deleteThreadChannel(event)"
    title="Are you sure you would like to delete?"
>
    This is a permanent action and cannot be undone
</confirmation-dialog>

<div class="row">
    <div class="col-12 col-lg-8">
        <feature-header
            doc-url="https://docs.betsybot.xyz/features/polls"
            title="${isNew ? 'Create' : 'Edit'} Thread Channel"
            subtitle="Manage your thread channel to help organize your server channels."
            delete-function.bind="() => confirmDeleteDialog.open()"
        ></feature-header>
        <moo-switch
            label="Active?"
            class="mt-3"
            value.bind="threadChannel.active"
        ></moo-switch>

        <moo-tab-bar>
            <moo-tab
                label="Settings"
                tab.bind="tab"
                value="settings"
                active.bind="tab === 'settings'"
            ></moo-tab>
            <moo-tab
                label="Initial Message"
                value="initial-message"
                tab.bind="tab"
                active.bind="tab === 'initial-message'"
            ></moo-tab>
        </moo-tab-bar>

        <div if.bind="tab === 'settings'">
            <form submit.trigger="tab = 'initial-message'">
                <div class="mt-3 mb-2">
                    <discord-channel-selector
                        required.bind="true"
                        label="Channel"
                        channel-id.two-way="threadChannel.discordChannelId"
                    ></discord-channel-selector>
                </div>
                <div class="text-end">
                    <moo-button variant="primary" type="submit">
                        Next
                    </moo-button>
                </div>
            </form>
        </div>
        <div class="" if.bind="tab === 'initial-message'">
            <form submit.trigger="save()">
                <discord-message-creator
                    allow-components="true"
                    message.two-way="threadChannel.initialMessage.message"
                ></discord-message-creator>

                <div class="text-end mt-3">
                    <moo-button variant="primary" type="submit">
                        Save
                    </moo-button>
                </div>
            </form>
        </div>
    </div>
    <div class="col-12 col-lg-4">
        <discord-message-preview
            message.two-way="threadChannel.initialMessage.message"></discord-message-preview>
    </div>
</div>
