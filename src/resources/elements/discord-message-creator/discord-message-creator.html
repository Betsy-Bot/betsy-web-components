<template>
  <section id="discord-message-creator">
    <mdc-tab-bar view-model.ref="tabBar"
                 use-automatic-activation.bind="useAutomaticActivation" focus-on-activate.bind="false">
      <mdc-tab label="Message" active.bind="message.type === 'message'" click.delegate="selectTab('message')"></mdc-tab>
      <mdc-tab label="Embeds" active.bind="message.type === 'embeds'" click.delegate="selectTab('embeds')"></mdc-tab>
    </mdc-tab-bar>

    <div class="message-area" if.bind="message.type === 'message'">
      <mdc-text-field
        rows="8"
        class="w-100"
        textarea
        label="Content"
        value.bind="message.content"
      ></mdc-text-field>
    </div>
    <div class="embed-area" if.bind="message.type === 'embeds'">
      <mdc-text-field
        class="w-100 mb-2"
        label="Content"
        value.bind="message.content"
      ></mdc-text-field>
      <button mdc-button
              class="button-primary mb-2"
              if.bind="!message.embeds || message.embeds.length < 10"
              click.delegate="addEmbed()">
        Add Embed
      </button>
      <div class="embed mb-2" repeat.for="embed of message.embeds">
        <embed-editor embed.two-way="embed"></embed-editor>
        <button mdc-button
                class="button-secondary mb-2"
                click.delegate="deleteEmbed($index)">
          Delete Embed
        </button>
      </div>
    </div>
  </section>
</template>
