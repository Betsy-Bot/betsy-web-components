<template>
    <section id="discord-message-creator">
        <mdc-tab-bar view-model.ref="tabBar"
                     use-automatic-activation.bind="useAutomaticActivation" focus-on-activate.bind="false">
            <mdc-tab label="Message" active.bind="tab === 'message'"
                     click.delegate="tab = 'message'"></mdc-tab>
            <mdc-tab label="Embeds" active.bind="tab === 'embeds'"
                     click.delegate="tab = 'embeds'"></mdc-tab>
            <mdc-tab label="Components" active.bind="tab === 'components'"
                     click.delegate="tab = 'components'" if.bind="allowComponents"></mdc-tab>
        </mdc-tab-bar>

        <div class="message-area" if.bind="tab === 'message'">
            <mdc-text-field
                rows="8"
                class="w-100"
                textarea
                label="Content"
                value.bind="message.content"
            ></mdc-text-field>
        </div>
        <div class="embed-area" if.bind="tab === 'embeds'">
            <mdc-text-field
                class="w-100 mb-2"
                label="Content"
                value.bind="message.content"
            ></mdc-text-field>
            <button mdc-button
                    class="button-primary mb-2"
                    if.bind="canCreateEmbed"
                    click.delegate="addEmbed()">
                Add Embed
            </button>
            <div class="embed mb-2" repeat.for="embed of message.embeds">
                <embed-editor embed.two-way="embed"></embed-editor>
                <button mdc-button
                        class="button-secondary mb-2"
                        click.delegate="deleteEmbed($index)">
                    Delete Embed
                </button>
            </div>
        </div>

        <div class="component-area" if.bind="tab === 'components'">
            <discord-component-creator components.two-way="message.components"></discord-component-creator>
        </div>
    </section>
</template>
